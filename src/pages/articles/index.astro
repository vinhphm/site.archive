---
import { Card } from "@/components/Card"
import Layout from "@/layouts/Simple.astro"
import { formatDate } from "@/lib/formatDate"
import { getArticles } from "@/lib/getArticles"
import * as timeago from "timeago.js"

const articles = await getArticles()
---

<Layout
  title="Articles"
  description="All of my long-form thoughts on programming, product design, and more, collected in chronological order."
>
  <Fragment slot="title">
    Writing on software developing, world exploring, and the design industry.
  </Fragment>

  <Fragment slot="intro">
    All of my long-form thoughts on programming, product design, and more,
    collected in chronological order.
  </Fragment>

  <div
    class="md:border-l md:border-zinc-100 md:pl-6 md:dark:border-zinc-700/40"
  >
    <div class="flex max-w-3xl flex-col space-y-16">
      {
        articles.map(article => (
          <article class="md:grid md:grid-cols-4 md:items-baseline">
            <Card className="md:col-span-3">
              <Card.Title href={`/articles/${article.slug}`}>
                {article.data.title}
              </Card.Title>
              <Card.Eyebrow
                as="time"
                className="md:hidden"
                dateTime={formatDate(article.data.date)}
                decorate
                title={formatDate(article.data.date)}
              >
                {timeago.format(article.data.date)}
              </Card.Eyebrow>
              <Card.Description>{article.data.summary}</Card.Description>
            </Card>
            <Card.Eyebrow
              as="time"
              className="mt-1 hidden md:block"
              dateTime={formatDate(article.data.date)}
              title={formatDate(article.data.date)}
            >
              {timeago.format(article.data.date)}
            </Card.Eyebrow>
          </article>
        ))
      }
    </div>
  </div>
</Layout>
