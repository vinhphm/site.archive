{
  "title": "Images in Next.js",
  "date": "2020-11-11T00:00:00.000Z",
  "tags": ["next js", "guide"],
  "draft": false,
  "summary": "In this article we introduce adding images in the tailwind starter blog and the benefits and limitations of the next/image component.",
  "authors": ["sparrowhawk"],
  "body": {
    "raw": "\n# Introduction\n\nThe tailwind starter blog has out of the box support for [Next.js's built-in image component](https://nextjs.org/docs/api-reference/next/image) and automatically swaps out default image tags in markdown or mdx documents to use the Image component provided.\n\n# Usage\n\nTo use in a new page route / javascript file, simply import the image component and call it e.g.\n\n```js\nimport Image from 'next/image'\n\nfunction Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image src=\"/me.png\" alt=\"Picture of the author\" width={500} height={500} />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n\nexport default Home\n```\n\nFor a markdown file, the default image tag can be used and the default `img` tag gets replaced by the `Image` component in the build process.\n\nAssuming we have a file called `ocean.jpg` in `data/img/ocean.jpg`, the following line of code would generate the optimized image.\n\n```\n![ocean](/static/images/ocean.jpg)\n```\n\nAlternatively, since we are using mdx, we can just use the image component directly! Note, that you would have to provide a fixed width and height. The `img` tag method parses the dimension automatically.\n\n```js\n<Image alt=\"ocean\" src=\"/static/images/ocean.jpg\" width={256} height={128} />\n```\n\n_Note_: If you try to save the image, it is in webp format, if your browser supports it!\n\n![ocean](/static/images/ocean.jpeg)\n\nPhoto by [YUCAR FotoGrafik](https://unsplash.com/@yucar?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\non [Unsplash](https://unsplash.com/s/photos/sea?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n# Benefits\n\n- Smaller image size with Webp (~30% smaller than jpeg)\n- Responsive images - the correct image size is served based on the user's viewport\n- Lazy loading - images load as they are scrolled to the viewport\n- Avoids [Cumulative Layout Shift](https://web.dev/cls/)\n- Optimization on demand instead of build-time - no increase in build time!\n\n# Limitations\n\n- Due to the reliance on `next/image`, unless you are using an external image CDN like Cloudinary or Imgix, it is practically required to use Vercel for hosting. This is because the component acts like a serverless function that calls a highly optimized image CDN.\n\n  If you do not want to be tied to Vercel, you can remove `imgToJsx` in `remarkPlugins` in `lib/mdx.js`. This would avoid substituting the default `img` tag.\n\n  Alternatively, one could wait for image optimization at build time to be supported. A different library, [next-optimized-images](https://github.com/cyrilwanner/next-optimized-images) does that, although it requires transforming the images through webpack which is not done here.\n\n- Images from external links are not passed through `next/image`\n- All images have to be stored in the `public` folder e.g `/static/images/ocean.jpeg`\n",
    "code": "var Component=(()=>{var h=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of p(e))!g.call(a,i)&&i!==s&&t(a,i,{get:()=>e[i],enumerable:!(o=m(e,i))||o.enumerable});return a};var f=(a,e,s)=>(s=a!=null?h(u(a)):{},c(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=>c(t({},\"__esModule\",{value:!0}),a);var r=N((_,l)=>{l.exports=_jsx_runtime});var j={};k(j,{default:()=>x,frontmatter:()=>y});var n=f(r()),y={title:\"Images in Next.js\",date:\"2020-11-11\",tags:[\"next js\",\"guide\"],draft:!1,summary:\"In this article we introduce adding images in the tailwind starter blog and the benefits and limitations of the next/image component.\",authors:[\"sparrowhawk\"]};function d(a){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",pre:\"pre\",code:\"code\",em:\"em\",div:\"div\",ul:\"ul\",li:\"li\"},a.components),{Image:s}=e;return s||v(\"Image\",!0,\"50:1-50:36\"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h1,{id:\"introduction\",children:[(0,n.jsx)(e.a,{href:\"#introduction\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),(0,n.jsxs)(e.p,{children:[\"The tailwind starter blog has out of the box support for \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/api-reference/next/image\",children:\"Next.js's built-in image component\"}),\" and automatically swaps out default image tags in markdown or mdx documents to use the Image component provided.\"]}),(0,n.jsxs)(e.h1,{id:\"usage\",children:[(0,n.jsx)(e.a,{href:\"#usage\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Usage\"]}),(0,n.jsx)(e.p,{children:\"To use in a new page route / javascript file, simply import the image component and call it e.g.\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Image\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'next/image'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Home\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"h1\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"My\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Homepage\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"h1\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Image\"}),\" src\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/me.png\"'}),\" alt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Picture of the author\"'}),\" width\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"500\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" height\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"500\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"p\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Welcome\"}),\" to my homepage\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"p\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Home\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"For a markdown file, the default image tag can be used and the default \",(0,n.jsx)(e.code,{children:\"img\"}),\" tag gets replaced by the \",(0,n.jsx)(e.code,{children:\"Image\"}),\" component in the build process.\"]}),(0,n.jsxs)(e.p,{children:[\"Assuming we have a file called \",(0,n.jsx)(e.code,{children:\"ocean.jpg\"}),\" in \",(0,n.jsx)(e.code,{children:\"data/img/ocean.jpg\"}),\", the following line of code would generate the optimized image.\"]}),(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`![ocean](/static/images/ocean.jpg)\n`})})}),(0,n.jsxs)(e.p,{children:[\"Alternatively, since we are using mdx, we can just use the image component directly! Note, that you would have to provide a fixed width and height. The \",(0,n.jsx)(e.code,{children:\"img\"}),\" tag method parses the dimension automatically.\"]}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsx)(e.code,{className:\"language-js code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Image\"}),\" alt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"ocean\"'}),\" src\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/static/images/ocean.jpg\"'}),\" width\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"256\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" height\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"128\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"Note\"}),\": If you try to save the image, it is in webp format, if your browser supports it!\"]}),(0,n.jsx)(e.div,{children:(0,n.jsx)(s,{alt:\"ocean\",src:\"/static/images/ocean.jpeg\",width:\"1920\",height:\"1280\"})}),(0,n.jsxs)(e.p,{children:[\"Photo by \",(0,n.jsx)(e.a,{href:\"https://unsplash.com/@yucar?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\",children:\"YUCAR FotoGrafik\"}),\" on \",(0,n.jsx)(e.a,{href:\"https://unsplash.com/s/photos/sea?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\",children:\"Unsplash\"})]}),(0,n.jsxs)(e.h1,{id:\"benefits\",children:[(0,n.jsx)(e.a,{href:\"#benefits\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Benefits\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"Smaller image size with Webp (~30% smaller than jpeg)\"}),(0,n.jsx)(e.li,{children:\"Responsive images - the correct image size is served based on the user's viewport\"}),(0,n.jsx)(e.li,{children:\"Lazy loading - images load as they are scrolled to the viewport\"}),(0,n.jsxs)(e.li,{children:[\"Avoids \",(0,n.jsx)(e.a,{href:\"https://web.dev/cls/\",children:\"Cumulative Layout Shift\"})]}),(0,n.jsx)(e.li,{children:\"Optimization on demand instead of build-time - no increase in build time!\"})]}),(0,n.jsxs)(e.h1,{id:\"limitations\",children:[(0,n.jsx)(e.a,{href:\"#limitations\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Limitations\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsxs)(e.p,{children:[\"Due to the reliance on \",(0,n.jsx)(e.code,{children:\"next/image\"}),\", unless you are using an external image CDN like Cloudinary or Imgix, it is practically required to use Vercel for hosting. This is because the component acts like a serverless function that calls a highly optimized image CDN.\"]}),(0,n.jsxs)(e.p,{children:[\"If you do not want to be tied to Vercel, you can remove \",(0,n.jsx)(e.code,{children:\"imgToJsx\"}),\" in \",(0,n.jsx)(e.code,{children:\"remarkPlugins\"}),\" in \",(0,n.jsx)(e.code,{children:\"lib/mdx.js\"}),\". This would avoid substituting the default \",(0,n.jsx)(e.code,{children:\"img\"}),\" tag.\"]}),(0,n.jsxs)(e.p,{children:[\"Alternatively, one could wait for image optimization at build time to be supported. A different library, \",(0,n.jsx)(e.a,{href:\"https://github.com/cyrilwanner/next-optimized-images\",children:\"next-optimized-images\"}),\" does that, although it requires transforming the images through webpack which is not done here.\"]})]}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[\"Images from external links are not passed through \",(0,n.jsx)(e.code,{children:\"next/image\"})]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[\"All images have to be stored in the \",(0,n.jsx)(e.code,{children:\"public\"}),\" folder e.g \",(0,n.jsx)(e.code,{children:\"/static/images/ocean.jpeg\"})]})})]})]})}function w(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var x=w;function v(a,e,s){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(s?\"\\nIt\\u2019s referenced in your code at `\"+s+\"` in `/Users/vinh/Development/vinh-dev/_mdx_bundler_entry_point-7a21f60e-d84a-4eb3-b5d9-242069019099.mdx`\":\"\"))}return b(j);})();\n;return Component;"
  },
  "_id": "blog/guide-to-using-images-in-nextjs.mdx",
  "_raw": {
    "sourceFilePath": "blog/guide-to-using-images-in-nextjs.mdx",
    "sourceFileName": "guide-to-using-images-in-nextjs.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/guide-to-using-images-in-nextjs"
  },
  "type": "Blog",
  "readingTime": {
    "text": "2 min read",
    "minutes": 1.95,
    "time": 117000,
    "words": 390
  },
  "slug": "guide-to-using-images-in-nextjs",
  "path": "blog/guide-to-using-images-in-nextjs",
  "filePath": "blog/guide-to-using-images-in-nextjs.mdx",
  "toc": [
    {
      "value": "Introduction",
      "url": "#introduction",
      "depth": 1
    },
    {
      "value": "Usage",
      "url": "#usage",
      "depth": 1
    },
    {
      "value": "Benefits",
      "url": "#benefits",
      "depth": 1
    },
    {
      "value": "Limitations",
      "url": "#limitations",
      "depth": 1
    }
  ]
}
